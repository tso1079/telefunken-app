<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telefunken Score Keeper</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // Lucide React icons as inline SVG components
        const Plus = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
        );

        const Minus = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
        );

        const Settings = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="12" cy="12" r="3"></circle>
                <path d="M12 1v6m0 6v6m5.196-15.804l-4.242 4.242m-6.364 6.364l-4.242 4.242M23 12h-6m-6 0H1m18.804-5.196l-4.242 4.242m-6.364 6.364l-4.242 4.242"></path>
            </svg>
        );

        const Trophy = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
                <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
                <path d="M4 22h16"></path>
                <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
                <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
                <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
            </svg>
        );

        const RotateCcw = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="1 4 1 10 7 10"></polyline>
                <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>
            </svg>
        );

        const Calculator = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <rect x="4" y="2" width="16" height="20" rx="2"></rect>
                <line x1="8" y1="6" x2="16" y2="6"></line>
                <line x1="16" y1="14" x2="16" y2="14"></line>
                <line x1="8" y1="14" x2="8" y2="14"></line>
                <line x1="12" y1="14" x2="12" y2="14"></line>
                <line x1="16" y1="18" x2="16" y2="18"></line>
                <line x1="8" y1="18" x2="8" y2="18"></line>
                <line x1="12" y1="18" x2="12" y2="18"></line>
            </svg>
        );

        const X = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        );

        // Custom Telefunken Logo Component
        const TelefunkenLogo = ({ size = 60 }) => (
            <svg width={size} height={size} viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="50" cy="50" r="45" stroke="currentColor" strokeWidth="2" opacity="0.2" />
                <circle cx="50" cy="50" r="35" stroke="currentColor" strokeWidth="2" opacity="0.4" />
                <circle cx="50" cy="50" r="25" stroke="currentColor" strokeWidth="2" opacity="0.6" />
                <rect x="30" y="35" width="18" height="26" rx="2" fill="currentColor" opacity="0.9" />
                <rect x="41" y="35" width="18" height="26" rx="2" fill="currentColor" opacity="0.7" />
                <rect x="52" y="35" width="18" height="26" rx="2" fill="currentColor" opacity="0.9" />
                <path d="M39 45 L41 48 L37 48 Z" fill="white" />
                <circle cx="50" cy="46" r="2" fill="white" />
                <path d="M61 48 C61 48 59 45 61 43 C63 45 61 48 61 48 Z" fill="white" />
            </svg>
        );

        function TelefunkenScorekeeper() {
            const [gameStarted, setGameStarted] = useState(false);
            const [currentRound, setCurrentRound] = useState(1);
            const [players, setPlayers] = useState([]);
            const [numPlayers, setNumPlayers] = useState(4);
            const [showSettings, setShowSettings] = useState(false);
            const [showCalculator, setShowCalculator] = useState(false);
            const [activeCalculatorPlayer, setActiveCalculatorPlayer] = useState(null);
            
            const [penalties, setPenalties] = useState({
                joker: 20,
                two: 20,
                ace: 15,
                highCards: 10,
                lowCards: 5
            });

            const [cardCounts, setCardCounts] = useState({
                jokers: 0,
                twos: 0,
                aces: 0,
                highCards: 0,
                lowCards: 0
            });

            const rounds = [
                { number: 1, name: "Pure Trio", description: "1 set of 3 (no jokers, different suits)" },
                { number: 2, name: "Two Trios", description: "Two sets of 3 cards" },
                { number: 3, name: "One Quartet", description: "One set of 4 cards" },
                { number: 4, name: "Two Quartets", description: "Two sets of 4 cards" },
                { number: 5, name: "One Quinteto", description: "One set of 5 cards" },
                { number: 6, name: "Quinteto + Trio", description: "Set of 5 + set of 3" },
                { number: 7, name: "Trio + Run", description: "Set of 3 + run of 7+" }
            ];

            const initializePlayers = () => {
                const newPlayers = [];
                for (let i = 0; i < numPlayers; i++) {
                    newPlayers.push({
                        id: i + 1,
                        name: `Player ${i + 1}`,
                        tokens: 7,
                        scores: Array(7).fill(0),
                        totalScore: 0
                    });
                }
                setPlayers(newPlayers);
                setGameStarted(true);
            };

            const updatePlayerName = (playerId, newName) => {
                setPlayers(players.map(p => 
                    p.id === playerId ? { ...p, name: newName } : p
                ));
            };

            const updateRoundScore = (playerId, round, score) => {
                setPlayers(players.map(p => {
                    if (p.id === playerId) {
                        const newScores = [...p.scores];
                        newScores[round - 1] = parseInt(score) || 0;
                        const newTotal = newScores.reduce((sum, s) => sum + s, 0);
                        return { ...p, scores: newScores, totalScore: newTotal };
                    }
                    return p;
                }));
            };

            const useToken = (playerId) => {
                setPlayers(players.map(p => 
                    p.id === playerId && p.tokens > 0 ? { ...p, tokens: p.tokens - 1 } : p
                ));
            };

            const addToken = (playerId) => {
                setPlayers(players.map(p => 
                    p.id === playerId && p.tokens < 7 ? { ...p, tokens: p.tokens + 1 } : p
                ));
            };

            const nextRound = () => {
                if (currentRound < 7) {
                    setCurrentRound(currentRound + 1);
                }
            };

            const previousRound = () => {
                if (currentRound > 1) {
                    setCurrentRound(currentRound - 1);
                }
            };

            const resetGame = () => {
                setGameStarted(false);
                setCurrentRound(1);
                setPlayers([]);
            };

            const getWinner = () => {
                if (players.length === 0) return null;
                return players.reduce((min, p) => p.totalScore < min.totalScore ? p : min);
            };

            const openCalculator = (playerId) => {
                setActiveCalculatorPlayer(playerId);
                setShowCalculator(true);
                setCardCounts({
                    jokers: 0,
                    twos: 0,
                    aces: 0,
                    highCards: 0,
                    lowCards: 0
                });
            };

            const updateCardCount = (type, delta) => {
                setCardCounts(prev => ({
                    ...prev,
                    [type]: Math.max(0, prev[type] + delta)
                }));
            };

            const calculateTotal = () => {
                return (
                    cardCounts.jokers * penalties.joker +
                    cardCounts.twos * penalties.two +
                    cardCounts.aces * penalties.ace +
                    cardCounts.highCards * penalties.highCards +
                    cardCounts.lowCards * penalties.lowCards
                );
            };

            const applyCalculatedScore = () => {
                const total = calculateTotal();
                updateRoundScore(activeCalculatorPlayer, currentRound, total);
                setShowCalculator(false);
                setActiveCalculatorPlayer(null);
            };

            const closeCalculator = () => {
                setShowCalculator(false);
                setActiveCalculatorPlayer(null);
            };

            const CalculatorModal = () => {
                const player = players.find(p => p.id === activeCalculatorPlayer);
                const total = calculateTotal();

                return (
                    <div className="fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50">
                        <div className="bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto">
                            <div className="sticky top-0 bg-gradient-to-r from-emerald-600 to-teal-600 text-white p-6 rounded-t-2xl">
                                <div className="flex items-center justify-between">
                                    <div className="flex items-center gap-3">
                                        <Calculator size={24} />
                                        <div>
                                            <h3 className="text-xl font-bold">Score Calculator</h3>
                                            <p className="text-sm opacity-90">{player?.name} - Round {currentRound}</p>
                                        </div>
                                    </div>
                                    <button onClick={closeCalculator} className="text-white hover:bg-white/20 p-2 rounded-lg">
                                        <X size={24} />
                                    </button>
                                </div>
                            </div>

                            <div className="p-6 space-y-4">
                                {/* Jokers */}
                                <div className="bg-purple-50 rounded-xl p-4">
                                    <div className="flex items-center justify-between mb-3">
                                        <div>
                                            <div className="font-bold text-purple-900">Jokers</div>
                                            <div className="text-sm text-purple-600">{penalties.joker} pts each</div>
                                        </div>
                                        <div className="flex items-center gap-3">
                                            <button
                                                onClick={() => updateCardCount('jokers', -1)}
                                                className="bg-purple-200 text-purple-700 rounded-full p-2 hover:bg-purple-300"
                                            >
                                                <Minus size={20} />
                                            </button>
                                            <div className="text-2xl font-bold text-purple-900 w-12 text-center">
                                                {cardCounts.jokers}
                                            </div>
                                            <button
                                                onClick={() => updateCardCount('jokers', 1)}
                                                className="bg-purple-200 text-purple-700 rounded-full p-2 hover:bg-purple-300"
                                            >
                                                <Plus size={20} />
                                            </button>
                                        </div>
                                    </div>
                                    <div className="text-right text-sm font-semibold text-purple-900">
                                        = {cardCounts.jokers * penalties.joker} pts
                                    </div>
                                </div>

                                {/* Twos */}
                                <div className="bg-orange-50 rounded-xl p-4">
                                    <div className="flex items-center justify-between mb-3">
                                        <div>
                                            <div className="font-bold text-orange-900">Twos (2s)</div>
                                            <div className="text-sm text-orange-600">{penalties.two} pts each</div>
                                        </div>
                                        <div className="flex items-center gap-3">
                                            <button
                                                onClick={() => updateCardCount('twos', -1)}
                                                className="bg-orange-200 text-orange-700 rounded-full p-2 hover:bg-orange-300"
                                            >
                                                <Minus size={20} />
                                            </button>
                                            <div className="text-2xl font-bold text-orange-900 w-12 text-center">
                                                {cardCounts.twos}
                                            </div>
                                            <button
                                                onClick={() => updateCardCount('twos', 1)}
                                                className="bg-orange-200 text-orange-700 rounded-full p-2 hover:bg-orange-300"
                                            >
                                                <Plus size={20} />
                                            </button>
                                        </div>
                                    </div>
                                    <div className="text-right text-sm font-semibold text-orange-900">
                                        = {cardCounts.twos * penalties.two} pts
                                    </div>
                                </div>

                                {/* Aces */}
                                <div className="bg-red-50 rounded-xl p-4">
                                    <div className="flex items-center justify-between mb-3">
                                        <div>
                                            <div className="font-bold text-red-900">Aces</div>
                                            <div className="text-sm text-red-600">{penalties.ace} pts each</div>
                                        </div>
                                        <div className="flex items-center gap-3">
                                            <button
                                                onClick={() => updateCardCount('aces', -1)}
                                                className="bg-red-200 text-red-700 rounded-full p-2 hover:bg-red-300"
                                            >
                                                <Minus size={20} />
                                            </button>
                                            <div className="text-2xl font-bold text-red-900 w-12 text-center">
                                                {cardCounts.aces}
                                            </div>
                                            <button
                                                onClick={() => updateCardCount('aces', 1)}
                                                className="bg-red-200 text-red-700 rounded-full p-2 hover:bg-red-300"
                                            >
                                                <Plus size={20} />
                                            </button>
                                        </div>
                                    </div>
                                    <div className="text-right text-sm font-semibold text-red-900">
                                        = {cardCounts.aces * penalties.ace} pts
                                    </div>
                                </div>

                                {/* High Cards (8-K) */}
                                <div className="bg-blue-50 rounded-xl p-4">
                                    <div className="flex items-center justify-between mb-3">
                                        <div>
                                            <div className="font-bold text-blue-900">High Cards (8-K)</div>
                                            <div className="text-sm text-blue-600">{penalties.highCards} pts each</div>
                                        </div>
                                        <div className="flex items-center gap-3">
                                            <button
                                                onClick={() => updateCardCount('highCards', -1)}
                                                className="bg-blue-200 text-blue-700 rounded-full p-2 hover:bg-blue-300"
                                            >
                                                <Minus size={20} />
                                            </button>
                                            <div className="text-2xl font-bold text-blue-900 w-12 text-center">
                                                {cardCounts.highCards}
                                            </div>
                                            <button
                                                onClick={() => updateCardCount('highCards', 1)}
                                                className="bg-blue-200 text-blue-700 rounded-full p-2 hover:bg-blue-300"
                                            >
                                                <Plus size={20} />
                                            </button>
                                        </div>
                                    </div>
                                    <div className="text-right text-sm font-semibold text-blue-900">
                                        = {cardCounts.highCards * penalties.highCards} pts
                                    </div>
                                </div>

                                {/* Low Cards (3-7) */}
                                <div className="bg-green-50 rounded-xl p-4">
                                    <div className="flex items-center justify-between mb-3">
                                        <div>
                                            <div className="font-bold text-green-900">Low Cards (3-7)</div>
                                            <div className="text-sm text-green-600">{penalties.lowCards} pts each</div>
                                        </div>
                                        <div className="flex items-center gap-3">
                                            <button
                                                onClick={() => updateCardCount('lowCards', -1)}
                                                className="bg-green-200 text-green-700 rounded-full p-2 hover:bg-green-300"
                                            >
                                                <Minus size={20} />
                                            </button>
                                            <div className="text-2xl font-bold text-green-900 w-12 text-center">
                                                {cardCounts.lowCards}
                                            </div>
                                            <button
                                                onClick={() => updateCardCount('lowCards', 1)}
                                                className="bg-green-200 text-green-700 rounded-full p-2 hover:bg-green-300"
                                            >
                                                <Plus size={20} />
                                            </button>
                                        </div>
                                    </div>
                                    <div className="text-right text-sm font-semibold text-green-900">
                                        = {cardCounts.lowCards * penalties.lowCards} pts
                                    </div>
                                </div>

                                {/* Total */}
                                <div className="bg-gradient-to-r from-emerald-100 to-teal-100 rounded-xl p-4 border-2 border-emerald-300">
                                    <div className="flex items-center justify-between">
                                        <div className="text-lg font-bold text-emerald-900">Total Score</div>
                                        <div className="text-3xl font-bold text-emerald-900">{total}</div>
                                    </div>
                                </div>

                                {/* Action Buttons */}
                                <div className="flex gap-3 pt-2">
                                    <button
                                        onClick={closeCalculator}
                                        className="flex-1 bg-gray-200 text-gray-700 py-3 rounded-xl font-bold hover:bg-gray-300"
                                    >
                                        Cancel
                                    </button>
                                    <button
                                        onClick={applyCalculatedScore}
                                        className="flex-1 bg-gradient-to-r from-emerald-600 to-teal-600 text-white py-3 rounded-xl font-bold hover:from-emerald-700 hover:to-teal-700"
                                    >
                                        Apply Score
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            if (!gameStarted) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-emerald-900 via-teal-800 to-cyan-900 p-4">
                        <div className="max-w-md mx-auto">
                            <div className="bg-white rounded-2xl shadow-2xl p-8 mt-8">
                                <div className="text-center mb-8">
                                    <div className="flex justify-center mb-4">
                                        <div className="text-emerald-600">
                                            <TelefunkenLogo size={80} />
                                        </div>
                                    </div>
                                    <h1 className="text-4xl font-bold text-emerald-900 mb-2">Telefunken</h1>
                                    <p className="text-gray-600">Score Keeper</p>
                                </div>

                                <div className="space-y-6">
                                    <div>
                                        <label className="block text-sm font-semibold text-gray-700 mb-2">
                                            Number of Players
                                        </label>
                                        <div className="flex items-center gap-4">
                                            <button
                                                onClick={() => setNumPlayers(Math.max(2, numPlayers - 1))}
                                                className="bg-emerald-100 text-emerald-700 rounded-full p-2 hover:bg-emerald-200"
                                            >
                                                <Minus size={20} />
                                            </button>
                                            <div className="flex-1 text-center">
                                                <div className="text-4xl font-bold text-emerald-900">{numPlayers}</div>
                                            </div>
                                            <button
                                                onClick={() => setNumPlayers(Math.min(8, numPlayers + 1))}
                                                className="bg-emerald-100 text-emerald-700 rounded-full p-2 hover:bg-emerald-200"
                                            >
                                                <Plus size={20} />
                                            </button>
                                        </div>
                                    </div>

                                    <button
                                        onClick={() => setShowSettings(!showSettings)}
                                        className="w-full flex items-center justify-center gap-2 bg-gray-100 text-gray-700 py-3 rounded-lg hover:bg-gray-200 font-medium"
                                    >
                                        <Settings size={20} />
                                        {showSettings ? 'Hide' : 'Show'} Penalty Settings
                                    </button>

                                    {showSettings && (
                                        <div className="bg-gray-50 rounded-lg p-4 space-y-3">
                                            <div className="flex justify-between items-center">
                                                <label className="text-sm font-medium text-gray-700">Jokers</label>
                                                <input
                                                    type="number"
                                                    value={penalties.joker}
                                                    onChange={(e) => setPenalties({...penalties, joker: parseInt(e.target.value) || 0})}
                                                    className="w-20 px-3 py-1 border border-gray-300 rounded-lg text-center"
                                                />
                                            </div>
                                            <div className="flex justify-between items-center">
                                                <label className="text-sm font-medium text-gray-700">Twos (2s)</label>
                                                <input
                                                    type="number"
                                                    value={penalties.two}
                                                    onChange={(e) => setPenalties({...penalties, two: parseInt(e.target.value) || 0})}
                                                    className="w-20 px-3 py-1 border border-gray-300 rounded-lg text-center"
                                                />
                                            </div>
                                            <div className="flex justify-between items-center">
                                                <label className="text-sm font-medium text-gray-700">Aces</label>
                                                <input
                                                    type="number"
                                                    value={penalties.ace}
                                                    onChange={(e) => setPenalties({...penalties, ace: parseInt(e.target.value) || 0})}
                                                    className="w-20 px-3 py-1 border border-gray-300 rounded-lg text-center"
                                                />
                                            </div>
                                            <div className="flex justify-between items-center">
                                                <label className="text-sm font-medium text-gray-700">8-K</label>
                                                <input
                                                    type="number"
                                                    value={penalties.highCards}
                                                    onChange={(e) => setPenalties({...penalties, highCards: parseInt(e.target.value) || 0})}
                                                    className="w-20 px-3 py-1 border border-gray-300 rounded-lg text-center"
                                                />
                                            </div>
                                            <div className="flex justify-between items-center">
                                                <label className="text-sm font-medium text-gray-700">3-7</label>
                                                <input
                                                    type="number"
                                                    value={penalties.lowCards}
                                                    onChange={(e) => setPenalties({...penalties, lowCards: parseInt(e.target.value) || 0})}
                                                    className="w-20 px-3 py-1 border border-gray-300 rounded-lg text-center"
                                                />
                                            </div>
                                        </div>
                                    )}

                                    <button
                                        onClick={initializePlayers}
                                        className="w-full bg-gradient-to-r from-emerald-600 to-teal-600 text-white py-4 rounded-xl font-bold text-lg hover:from-emerald-700 hover:to-teal-700 shadow-lg"
                                    >
                                        Start Game
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            const currentRoundInfo = rounds[currentRound - 1];
            const winner = currentRound === 7 && players.every(p => p.scores[6] > 0) ? getWinner() : null;

            return (
                <div className="min-h-screen bg-gradient-to-br from-emerald-900 via-teal-800 to-cyan-900 p-4 pb-24">
                    <div className="max-w-4xl mx-auto">
                        <div className="bg-white rounded-2xl shadow-xl p-6 mb-4">
                            <div className="flex items-center justify-between mb-4">
                                <div className="flex items-center gap-3">
                                    <div className="text-emerald-600">
                                        <TelefunkenLogo size={40} />
                                    </div>
                                    <h1 className="text-2xl font-bold text-emerald-900">Telefunken</h1>
                                </div>
                                <button
                                    onClick={resetGame}
                                    className="flex items-center gap-2 bg-red-100 text-red-700 px-4 py-2 rounded-lg hover:bg-red-200 font-medium"
                                >
                                    <RotateCcw size={16} />
                                    New Game
                                </button>
                            </div>
                            
                            <div className="bg-gradient-to-r from-emerald-500 to-teal-500 rounded-xl p-4 text-white">
                                <div className="flex items-center justify-between">
                                    <button
                                        onClick={previousRound}
                                        disabled={currentRound === 1}
                                        className={`text-white p-2 rounded-lg ${currentRound === 1 ? 'opacity-30' : 'hover:bg-white/20'}`}
                                    >
                                        ←
                                    </button>
                                    <div className="text-center flex-1">
                                        <div className="text-sm opacity-90">Round {currentRound} of 7</div>
                                        <div className="text-xl font-bold">{currentRoundInfo.name}</div>
                                        <div className="text-sm opacity-90">{currentRoundInfo.description}</div>
                                    </div>
                                    <button
                                        onClick={nextRound}
                                        disabled={currentRound === 7}
                                        className={`text-white p-2 rounded-lg ${currentRound === 7 ? 'opacity-30' : 'hover:bg-white/20'}`}
                                    >
                                        →
                                    </button>
                                </div>
                            </div>
                        </div>

                        {winner && (
                            <div className="bg-gradient-to-r from-yellow-400 to-amber-500 rounded-2xl shadow-xl p-6 mb-4 text-center">
                                <Trophy size={48} className="mx-auto mb-2 text-white" />
                                <h2 className="text-2xl font-bold text-white mb-1">Winner!</h2>
                                <p className="text-xl text-white">{winner.name}</p>
                                <p className="text-white/90">Final Score: {winner.totalScore}</p>
                            </div>
                        )}

                        <div className="space-y-3">
                            {players.map(player => (
                                <div key={player.id} className="bg-white rounded-xl shadow-lg p-4">
                                    <div className="flex items-center justify-between mb-3">
                                        <input
                                            type="text"
                                            value={player.name}
                                            onChange={(e) => updatePlayerName(player.id, e.target.value)}
                                            className="text-lg font-bold text-emerald-900 bg-transparent border-b-2 border-transparent hover:border-emerald-300 focus:border-emerald-500 outline-none px-2 py-1"
                                        />
                                        <div className="flex items-center gap-4">
                                            <button
                                                onClick={() => openCalculator(player.id)}
                                                className="flex items-center gap-2 bg-gradient-to-r from-emerald-500 to-teal-500 text-white px-4 py-2 rounded-lg hover:from-emerald-600 hover:to-teal-600 font-medium shadow-md"
                                            >
                                                <Calculator size={16} />
                                                Calculate
                                            </button>
                                            <div className="text-right">
                                                <div className="text-xs text-gray-500">Total</div>
                                                <div className="text-2xl font-bold text-emerald-900">{player.totalScore}</div>
                                            </div>
                                        </div>
                                    </div>

                                    <div className="flex items-center gap-2 mb-3 bg-amber-50 rounded-lg p-2">
                                        <div className="text-sm font-medium text-amber-900 flex-1">
                                            Tokens: {player.tokens}/7
                                        </div>
                                        <button
                                            onClick={() => useToken(player.id)}
                                            disabled={player.tokens === 0}
                                            className={`px-3 py-1 rounded-lg text-sm font-medium ${
                                                player.tokens === 0
                                                    ? 'bg-gray-200 text-gray-400 cursor-not-allowed'
                                                    : 'bg-amber-500 text-white hover:bg-amber-600'
                                            }`}
                                        >
                                            Use Token
                                        </button>
                                        <button
                                            onClick={() => addToken(player.id)}
                                            disabled={player.tokens === 7}
                                            className={`px-3 py-1 rounded-lg text-sm font-medium ${
                                                player.tokens === 7
                                                    ? 'bg-gray-200 text-gray-400 cursor-not-allowed'
                                                    : 'bg-emerald-500 text-white hover:bg-emerald-600'
                                            }`}
                                        >
                                            Add Back
                                        </button>
                                    </div>

                                    <div className="grid grid-cols-7 gap-2">
                                        {rounds.map((round) => (
                                            <div key={round.number} className="text-center">
                                                <div className={`text-xs font-medium mb-1 ${
                                                    round.number === currentRound ? 'text-emerald-600' : 'text-gray-500'
                                                }`}>
                                                    R{round.number}
                                                </div>
                                                <input
                                                    type="number"
                                                    value={player.scores[round.number - 1] || ''}
                                                    onChange={(e) => updateRoundScore(player.id, round.number, e.target.value)}
                                                    className={`w-full px-1 py-2 text-center border-2 rounded-lg font-semibold ${
                                                        round.number === currentRound
                                                            ? 'border-emerald-500 bg-emerald-50'
                                                            : 'border-gray-200'
                                                    }`}
                                                    placeholder="0"
                                                />
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            ))}
                        </div>

                        <div className="bg-white rounded-2xl shadow-xl p-6 mt-4">
                            <h3 className="text-lg font-bold text-emerald-900 mb-3">Penalty Reference</h3>
                            <div className="grid grid-cols-2 gap-3 text-sm">
                                <div className="flex justify-between">
                                    <span className="text-gray-600">Jokers:</span>
                                    <span className="font-bold text-emerald-900">{penalties.joker} pts</span>
                                </div>
                                <div className="flex justify-between">
                                    <span className="text-gray-600">Twos (2s):</span>
                                    <span className="font-bold text-emerald-900">{penalties.two} pts</span>
                                </div>
                                <div className="flex justify-between">
                                    <span className="text-gray-600">Aces:</span>
                                    <span className="font-bold text-emerald-900">{penalties.ace} pts</span>
                                </div>
                                <div className="flex justify-between">
                                    <span className="text-gray-600">8-K:</span>
                                    <span className="font-bold text-emerald-900">{penalties.highCards} pts</span>
                                </div>
                                <div className="flex justify-between col-span-2">
                                    <span className="text-gray-600">3-7:</span>
                                    <span className="font-bold text-emerald-900">{penalties.lowCards} pts</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    {showCalculator && <CalculatorModal />}
                </div>
            );
        }

        ReactDOM.render(<TelefunkenScorekeeper />, document.getElementById('root'));
    </script>
</body>
</html>
